{% extends "base.html" %}
{% load static %}

{% block head_extra %}
<!-- CSS especÃ­fico del blog -->
<link rel="stylesheet" href="{% static 'blog/styles.css' %}">
{% endblock head_extra %}

{% block page_title %}
<h2>{{ category }}</h2>
{% endblock page_title %}

{% block page_content %}
<input type="checkbox" id="menu-toggle">
<label class="menu-icon" for="menu-toggle">&#9776;</label>

<div class="page-wrapper">
    <nav class="side-menu">
        <ul>
            <li><a href="{% url 'portfolio_home' %}">Volver al Portfolio</a></li>
            <li><a href="{% url 'blog_index' %}">Todos los Posts</a></li>
            <li>
                CategorÃ­as:
                {% for cat in categories %}
                    <a href="{% url 'blog_category' cat.name %}">{{ cat.name }}</a>
                {% endfor %}
            </li>
            <li><button id="btn-tema">ðŸŒž / ðŸŒ™ Cambiar modo</button></li>
        </ul>
    </nav>

    <div class="contenido">
        <section class="blog-posts">
            {% for post in posts %}
                <article class="post-card">
                    <h3 class="post-title">
                        <a href="{% url 'blog_detail' post.pk %}">{{ post.title }}</a>
                    </h3>
                    <div class="post-meta">
                        <small>{{ post.created_on.date }}</small> |
                        <span class="categories">
                            Categories:
                            {% for c in post.categories.all %}
                                <a href="{% url 'blog_category' c.name %}" class="category-link">{{ c.name }}</a>
                            {% endfor %}
                        </span>
                    </div>
                    <p class="post-excerpt">{{ post.body|slice:":400" }}...</p>
                    <a href="{% url 'blog_detail' post.pk %}" class="read-more-btn">Leer mÃ¡s</a>
                </article>
            {% empty %}
                <p>No hay posts en esta categorÃ­a.</p>
            {% endfor %}
        </section>
    </div>
</div>

<script src="{% static 'blog/script.js' %}"></script>
{% endblock page_content %}
